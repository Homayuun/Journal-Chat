<html>
import axios from 'axios';
<style>
.post-Container {
  background-color: white;
  margin: 16px;
  padding: 16px;
  border-radius: 5px;
  border: solid 1px rgb(199, 199, 199)
}
</style>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
async function  handleDeletePost(e) {
  console.log("deleting...")
  console.log(e.target.id)

  const postId = e.target.id
  const url = '/post/' + postId
  try{ await axios.delete(url)
  location.reload()
}
catch (error) {
  console.error(err.toString())
  alert(err.toString())
}
}
</script>

  <body style='background-color: rgb(235, 235, 235)'>
    this will show a list of our posts
  </body>

    <form class = "post-container" action = "/post" method =  "POST">
      <div> Create Post </div>
      <input name ='title' type = "text"  placeholder = "Post Title">
      <input name = 'postBody' type = "text"  placeholder = "Post Body">
      <button type = "submit"> Submit </button>
    </form>


  <% allPosts.forEach(p => { %>
    <div style = 'background-color: white; margin: 16px'>
    <div><%= p.title %> </div>
      <div><%= p.body %> </div>
      <button id= '<%= p.id %>' onclick="handleDeletePost(event)">Delete</button>
    </div>
  <% }) %>
</html>
